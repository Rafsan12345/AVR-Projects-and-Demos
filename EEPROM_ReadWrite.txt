/*
 * Project Title : ATmega32 - EEPROM Example
 * Description   : Write and Read internal EEPROM.
 * Author        : Your Name
 * Date          : YYYY-MM-DD
 * Datasheet Ref : ATmega32 Datasheet - Section 22: EEPROM
 */

#define F_CPU 8000000UL
#include <avr/io.h>
#include <util/delay.h>

void EEPROM_Write(unsigned int addr, unsigned char data)
{
    while (EECR & (1 << EEWE));
    EEAR = addr;
    EEDR = data;
    EECR |= (1 << EEMWE);
    EECR |= (1 << EEWE);
}

unsigned char EEPROM_Read(unsigned int addr)
{
    while (EECR & (1 << EEWE));
    EEAR = addr;
    EECR |= (1 << EERE);
    return EEDR;
}

int main(void)
{
    DDRC = 0xFF;
    EEPROM_Write(0x10, 0x55);
    _delay_ms(10);
    PORTC = EEPROM_Read(0x10);
    while (1) { }
}
